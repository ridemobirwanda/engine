/**
 * Seed MySQL with sample products and categories
 * Use this if you can't access Supabase data
 */

import mysql from 'mysql2/promise';
import dotenv from 'dotenv';

dotenv.config();

const MYSQL_HOST = process.env.MYSQL_HOST || 'localhost';
const MYSQL_USER = process.env.MYSQL_USER || 'enginedb';
const MYSQL_PASSWORD = process.env.MYSQL_PASSWORD;
const MYSQL_DATABASE = process.env.MYSQL_DATABASE || 'enginedb';
const MYSQL_PORT = parseInt(process.env.MYSQL_PORT || '3306', 10);

// Sample categories
const categories = [
  { name: 'Engines', slug: 'engines', description: 'Complete engine assemblies', is_active: 1, display_order: 1 },
  { name: 'Engine Parts', slug: 'engine-parts', description: 'Individual engine components', is_active: 1, display_order: 2 },
  { name: 'Rebuilt Engines', slug: 'rebuilt-engines', description: 'Professionally rebuilt engines', is_active: 1, display_order: 3 },
  { name: 'Used Engines', slug: 'used-engines', description: 'Quality used engines', is_active: 1, display_order: 4 },
  { name: 'Performance', slug: 'performance', description: 'High-performance engines', is_active: 1, display_order: 5 },
];

// Sample products (28 products to match your original)
const products = [
  {
    name: '2.0L Turbo Engine',
    short_description: 'High-performance turbocharged engine',
    description: 'Complete 2.0L turbocharged engine with low mileage. Perfect condition, tested and ready to install.',
    price: 2499.99,
    compare_price: 3200.00,
    brand: 'Generic',
    model: '2.0T',
    engine_type: 'Inline-4',
    displacement: '2.0L',
    fuel_type: 'Gasoline',
    condition: 'Used - Excellent',
    stock_quantity: 3,
    is_active: 1,
    is_featured: 1,
    category_id: 1,
    images: JSON.stringify(['https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?w=800&auto=format&fit=crop']),
  },
  {
    name: '3.5L V6 Engine',
    short_description: 'Reliable V6 powerplant',
    description: 'Smooth and powerful 3.5L V6 engine. Low miles, professionally inspected.',
    price: 3299.99,
    compare_price: 4200.00,
    brand: 'Generic',
    model: '3.5V6',
    engine_type: 'V6',
    displacement: '3.5L',
    fuel_type: 'Gasoline',
    condition: 'Used - Good',
    stock_quantity: 2,
    is_active: 1,
    is_featured: 1,
    category_id: 1,
    images: JSON.stringify(['https://images.unsplash.com/photo-1492144534655-ae79c964c9d7?w=800&auto=format&fit=crop']),
  },
  {
    name: '1.8L Economy Engine',
    short_description: 'Fuel-efficient compact engine',
    description: 'Perfect for daily commuting. Excellent fuel economy and reliability.',
    price: 1799.99,
    compare_price: 2400.00,
    brand: 'Generic',
    model: '1.8L',
    engine_type: 'Inline-4',
    displacement: '1.8L',
    fuel_type: 'Gasoline',
    condition: 'Used - Good',
    stock_quantity: 5,
    is_active: 1,
    is_featured: 0,
    category_id: 4,
    images: JSON.stringify(['https://images.unsplash.com/photo-1581092160562-40aa08e78837?w=800&auto=format&fit=crop']),
  },
  {
    name: '5.0L V8 Performance',
    short_description: 'High-performance V8',
    description: 'Massive power from this 5.0L V8. Perfect for performance builds.',
    price: 5999.99,
    compare_price: 7500.00,
    brand: 'Performance Co.',
    model: '5.0V8',
    engine_type: 'V8',
    displacement: '5.0L',
    fuel_type: 'Gasoline',
    condition: 'Rebuilt',
    stock_quantity: 1,
    is_active: 1,
    is_featured: 1,
    category_id: 5,
    images: JSON.stringify(['https://images.unsplash.com/photo-1563720223185-11003d516935?w=800&auto=format&fit=crop']),
  },
  {
    name: '2.5L Hybrid Engine',
    short_description: 'Eco-friendly hybrid system',
    description: 'Complete hybrid engine system with electric motor. Great fuel economy.',
    price: 4299.99,
    compare_price: 5800.00,
    brand: 'EcoTech',
    model: '2.5H',
    engine_type: 'Inline-4 Hybrid',
    displacement: '2.5L',
    fuel_type: 'Hybrid',
    condition: 'Used - Excellent',
    stock_quantity: 2,
    is_active: 1,
    is_featured: 1,
    category_id: 1,
    images: JSON.stringify(['https://images.unsplash.com/photo-1619642751034-765dfdf7c58e?w=800&auto=format&fit=crop']),
  },
  {
    name: '4.0L Inline-6',
    short_description: 'Smooth inline-6 engine',
    description: 'Classic inline-6 configuration. Known for smoothness and reliability.',
    price: 3799.99,
    brand: 'Classic Motors',
    model: '4.0I6',
    engine_type: 'Inline-6',
    displacement: '4.0L',
    fuel_type: 'Gasoline',
    condition: 'Used - Good',
    stock_quantity: 2,
    is_active: 1,
    is_featured: 0,
    category_id: 4,
    images: JSON.stringify(['https://images.unsplash.com/photo-1603584173870-7f23fdae1b7a?w=800&auto=format&fit=crop']),
  },
  {
    name: '1.6L Turbo Sport',
    short_description: 'Compact turbocharged engine',
    description: 'Small displacement, big power. Perfect for sport compact builds.',
    price: 2899.99,
    compare_price: 3600.00,
    brand: 'SportTech',
    model: '1.6T',
    engine_type: 'Inline-4 Turbo',
    displacement: '1.6L',
    fuel_type: 'Gasoline',
    condition: 'Rebuilt',
    stock_quantity: 3,
    is_active: 1,
    is_featured: 1,
    category_id: 3,
    images: JSON.stringify(['https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?w=800&auto=format&fit=crop']),
  },
  {
    name: '3.0L V6 Twin Turbo',
    short_description: 'Twin-turbocharged V6',
    description: 'Incredible power from twin turbos. Performance enthusiast\'s dream.',
    price: 6499.99,
    compare_price: 8200.00,
    brand: 'Performance Co.',
    model: '3.0TT',
    engine_type: 'V6 Twin Turbo',
    displacement: '3.0L',
    fuel_type: 'Gasoline',
    condition: 'Rebuilt',
    stock_quantity: 1,
    is_active: 1,
    is_featured: 1,
    category_id: 5,
    images: JSON.stringify(['https://images.unsplash.com/photo-1492144534655-ae79c964c9d7?w=800&auto=format&fit=crop']),
  },
  {
    name: '2.2L Diesel',
    short_description: 'Economical diesel engine',
    description: 'Great torque and fuel economy. Perfect for trucks and SUVs.',
    price: 3499.99,
    brand: 'DieselTech',
    model: '2.2D',
    engine_type: 'Inline-4 Diesel',
    displacement: '2.2L',
    fuel_type: 'Diesel',
    condition: 'Used - Excellent',
    stock_quantity: 4,
    is_active: 1,
    is_featured: 0,
    category_id: 1,
    images: JSON.stringify(['https://images.unsplash.com/photo-1581092160562-40aa08e78837?w=800&auto=format&fit=crop']),
  },
  {
    name: '6.2L V8 Supercharged',
    short_description: 'Supercharged powerhouse',
    description: 'Massive power with supercharger. Perfect for high-performance applications.',
    price: 8999.99,
    compare_price: 11500.00,
    brand: 'Performance Co.',
    model: '6.2SC',
    engine_type: 'V8 Supercharged',
    displacement: '6.2L',
    fuel_type: 'Gasoline',
    condition: 'Rebuilt',
    stock_quantity: 1,
    is_active: 1,
    is_featured: 1,
    category_id: 5,
    images: JSON.stringify(['https://images.unsplash.com/photo-1563720223185-11003d516935?w=800&auto=format&fit=crop']),
  },
  // Add 18 more products to reach 28
  {
    name: '1.5L Eco Engine',
    short_description: 'Ultra-efficient compact',
    description: 'Best-in-class fuel economy. Perfect for small cars.',
    price: 1599.99,
    brand: 'EcoTech',
    model: '1.5E',
    engine_type: 'Inline-4',
    displacement: '1.5L',
    fuel_type: 'Gasoline',
    condition: 'Used - Good',
    stock_quantity: 6,
    is_active: 1,
    is_featured: 0,
    category_id: 4,
    images: JSON.stringify(['https://images.unsplash.com/photo-1619642751034-765dfdf7c58e?w=800&auto=format&fit=crop']),
  },
  {
    name: '3.6L V6 AWD',
    short_description: 'AWD-compatible V6',
    description: 'Perfect for AWD vehicles. Proven reliability.',
    price: 3899.99,
    brand: 'Generic',
    model: '3.6V6',
    engine_type: 'V6',
    displacement: '3.6L',
    fuel_type: 'Gasoline',
    condition: 'Used - Excellent',
    stock_quantity: 2,
    is_active: 1,
    is_featured: 0,
    category_id: 1,
    images: JSON.stringify(['https://images.unsplash.com/photo-1603584173870-7f23fdae1b7a?w=800&auto=format&fit=crop']),
  },
  {
    name: '2.4L DOHC',
    short_description: 'Dual overhead cam engine',
    description: 'Smooth DOHC performance. Great for sedans.',
    price: 2299.99,
    brand: 'Generic',
    model: '2.4D',
    engine_type: 'Inline-4 DOHC',
    displacement: '2.4L',
    fuel_type: 'Gasoline',
    condition: 'Used - Good',
    stock_quantity: 4,
    is_active: 1,
    is_featured: 0,
    category_id: 4,
    images: JSON.stringify(['https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?w=800&auto=format&fit=crop']),
  },
  {
    name: '4.6L V8 Modular',
    short_description: 'Proven V8 platform',
    description: 'Millions of miles proven. Great for trucks.',
    price: 4299.99,
    brand: 'Classic Motors',
    model: '4.6V8',
    engine_type: 'V8',
    displacement: '4.6L',
    fuel_type: 'Gasoline',
    condition: 'Used - Excellent',
    stock_quantity: 2,
    is_active: 1,
    is_featured: 0,
    category_id: 1,
    images: JSON.stringify(['https://images.unsplash.com/photo-1492144534655-ae79c964c9d7?w=800&auto=format&fit=crop']),
  },
  {
    name: '1.4L Turbo Compact',
    short_description: 'Small turbo engine',
    description: 'Great power in a small package. Perfect for city cars.',
    price: 1899.99,
    brand: 'CompactTech',
    model: '1.4T',
    engine_type: 'Inline-4 Turbo',
    displacement: '1.4L',
    fuel_type: 'Gasoline',
    condition: 'Used - Good',
    stock_quantity: 5,
    is_active: 1,
    is_featured: 0,
    category_id: 4,
    images: JSON.stringify(['https://images.unsplash.com/photo-1581092160562-40aa08e78837?w=800&auto=format&fit=crop']),
  },
  {
    name: '3.8L V6 Supercharged',
    short_description: 'Supercharged V6',
    description: 'V8 power from a V6. Supercharged performance.',
    price: 5499.99,
    compare_price: 7000.00,
    brand: 'Performance Co.',
    model: '3.8SC',
    engine_type: 'V6 Supercharged',
    displacement: '3.8L',
    fuel_type: 'Gasoline',
    condition: 'Rebuilt',
    stock_quantity: 1,
    is_active: 1,
    is_featured: 1,
    category_id: 5,
    images: JSON.stringify(['https://images.unsplash.com/photo-1563720223185-11003d516935?w=800&auto=format&fit=crop']),
  },
  {
    name: '2.7L EcoBoost',
    short_description: 'Twin-turbo V6',
    description: 'Ford EcoBoost-style performance. Great power and economy.',
    price: 4799.99,
    compare_price: 6200.00,
    brand: 'EcoTech',
    model: '2.7EB',
    engine_type: 'V6 Twin Turbo',
    displacement: '2.7L',
    fuel_type: 'Gasoline',
    condition: 'Rebuilt',
    stock_quantity: 2,
    is_active: 1,
    is_featured: 1,
    category_id: 3,
    images: JSON.stringify(['https://images.unsplash.com/photo-1619642751034-765dfdf7c58e?w=800&auto=format&fit=crop']),
  },
  {
    name: '5.7L HEMI V8',
    short_description: 'Legendary HEMI power',
    description: 'Classic HEMI design. Massive torque and power.',
    price: 5299.99,
    compare_price: 6800.00,
    brand: 'Performance Co.',
    model: '5.7H',
    engine_type: 'V8 HEMI',
    displacement: '5.7L',
    fuel_type: 'Gasoline',
    condition: 'Rebuilt',
    stock_quantity: 1,
    is_active: 1,
    is_featured: 1,
    category_id: 5,
    images: JSON.stringify(['https://images.unsplash.com/photo-1603584173870-7f23fdae1b7a?w=800&auto=format&fit=crop']),
  },
  {
    name: '2.0L Diesel Turbo',
    short_description: 'Turbocharged diesel',
    description: 'Great fuel economy with turbo power. Perfect for SUVs.',
    price: 3799.99,
    brand: 'DieselTech',
    model: '2.0DT',
    engine_type: 'Inline-4 Diesel Turbo',
    displacement: '2.0L',
    fuel_type: 'Diesel',
    condition: 'Used - Excellent',
    stock_quantity: 3,
    is_active: 1,
    is_featured: 0,
    category_id: 1,
    images: JSON.stringify(['https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?w=800&auto=format&fit=crop']),
  },
  {
    name: '3.2L V6',
    short_description: 'Mid-size V6 engine',
    description: 'Perfect balance of power and efficiency.',
    price: 2999.99,
    brand: 'Generic',
    model: '3.2V6',
    engine_type: 'V6',
    displacement: '3.2L',
    fuel_type: 'Gasoline',
    condition: 'Used - Good',
    stock_quantity: 3,
    is_active: 1,
    is_featured: 0,
    category_id: 4,
    images: JSON.stringify(['https://images.unsplash.com/photo-1492144534655-ae79c964c9d7?w=800&auto=format&fit=crop']),
  },
  {
    name: '1.3L Turbo',
    short_description: 'Tiny turbo engine',
    description: 'Amazing efficiency in a tiny package.',
    price: 1499.99,
    brand: 'CompactTech',
    model: '1.3T',
    engine_type: 'Inline-3 Turbo',
    displacement: '1.3L',
    fuel_type: 'Gasoline',
    condition: 'Used - Good',
    stock_quantity: 7,
    is_active: 1,
    is_featured: 0,
    category_id: 4,
    images: JSON.stringify(['https://images.unsplash.com/photo-1581092160562-40aa08e78837?w=800&auto=format&fit=crop']),
  },
  {
    name: '4.0L V8 Performance',
    short_description: 'Compact V8 power',
    description: 'Small V8 with big performance. Perfect for sports cars.',
    price: 5799.99,
    compare_price: 7400.00,
    brand: 'Performance Co.',
    model: '4.0V8',
    engine_type: 'V8',
    displacement: '4.0L',
    fuel_type: 'Gasoline',
    condition: 'Rebuilt',
    stock_quantity: 1,
    is_active: 1,
    is_featured: 1,
    category_id: 5,
    images: JSON.stringify(['https://images.unsplash.com/photo-1619642751034-765dfdf7c58e?w=800&auto=format&fit=crop']),
  },
  {
    name: '2.3L EcoBoost',
    short_description: 'Turbo 4-cylinder',
    description: 'Ford Mustang-style turbo engine. Great performance.',
    price: 3399.99,
    compare_price: 4400.00,
    brand: 'EcoTech',
    model: '2.3EB',
    engine_type: 'Inline-4 Turbo',
    displacement: '2.3L',
    fuel_type: 'Gasoline',
    condition: 'Rebuilt',
    stock_quantity: 2,
    is_active: 1,
    is_featured: 1,
    category_id: 3,
    images: JSON.stringify(['https://images.unsplash.com/photo-1603584173870-7f23fdae1b7a?w=800&auto=format&fit=crop']),
  },
  {
    name: '3.0L Diesel V6',
    short_description: 'V6 diesel power',
    description: 'Smooth V6 diesel. Great for trucks and SUVs.',
    price: 4599.99,
    brand: 'DieselTech',
    model: '3.0DV6',
    engine_type: 'V6 Diesel',
    displacement: '3.0L',
    fuel_type: 'Diesel',
    condition: 'Used - Excellent',
    stock_quantity: 2,
    is_active: 1,
    is_featured: 0,
    category_id: 1,
    images: JSON.stringify(['https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?w=800&auto=format&fit=crop']),
  },
  {
    name: '6.0L V12',
    short_description: 'Luxury V12 engine',
    description: 'Ultra-smooth V12 power. For luxury vehicles.',
    price: 12999.99,
    compare_price: 16500.00,
    brand: 'Luxury Motors',
    model: '6.0V12',
    engine_type: 'V12',
    displacement: '6.0L',
    fuel_type: 'Gasoline',
    condition: 'Rebuilt',
    stock_quantity: 1,
    is_active: 1,
    is_featured: 1,
    category_id: 5,
    images: JSON.stringify(['https://images.unsplash.com/photo-1492144534655-ae79c964c9d7?w=800&auto=format&fit=crop']),
  },
  {
    name: '1.8L Hybrid',
    short_description: 'Compact hybrid system',
    description: 'Perfect for city driving. Great fuel economy.',
    price: 3299.99,
    brand: 'EcoTech',
    model: '1.8H',
    engine_type: 'Inline-4 Hybrid',
    displacement: '1.8L',
    fuel_type: 'Hybrid',
    condition: 'Used - Excellent',
    stock_quantity: 3,
    is_active: 1,
    is_featured: 0,
    category_id: 1,
    images: JSON.stringify(['https://images.unsplash.com/photo-1581092160562-40aa08e78837?w=800&auto=format&fit=crop']),
  },
  {
    name: '5.3L V8',
    short_description: 'Truck V8 engine',
    description: 'Perfect for trucks and SUVs. Proven reliability.',
    price: 4499.99,
    brand: 'Generic',
    model: '5.3V8',
    engine_type: 'V8',
    displacement: '5.3L',
    fuel_type: 'Gasoline',
    condition: 'Used - Good',
    stock_quantity: 2,
    is_active: 1,
    is_featured: 0,
    category_id: 4,
    images: JSON.stringify(['https://images.unsplash.com/photo-1619642751034-765dfdf7c58e?w=800&auto=format&fit=crop']),
  },
  {
    name: '2.5L Turbo AWD',
    short_description: 'AWD turbo engine',
    description: 'Perfect for AWD sports cars. Great power.',
    price: 4999.99,
    compare_price: 6400.00,
    brand: 'SportTech',
    model: '2.5TA',
    engine_type: 'Boxer-4 Turbo',
    displacement: '2.5L',
    fuel_type: 'Gasoline',
    condition: 'Rebuilt',
    stock_quantity: 2,
    is_active: 1,
    is_featured: 1,
    category_id: 3,
    images: JSON.stringify(['https://images.unsplash.com/photo-1603584173870-7f23fdae1b7a?w=800&auto=format&fit=crop']),
  },
];

async function seedData() {
  console.log('═══════════════════════════════════════════════════');
  console.log('  MYSQL SAMPLE DATA SEEDER');
  console.log('═══════════════════════════════════════════════════\n');

  if (!MYSQL_PASSWORD) {
    console.error('❌ Error: MYSQL_PASSWORD environment variable not set!');
    process.exit(1);
  }

  const connection = await mysql.createConnection({
    host: MYSQL_HOST,
    user: MYSQL_USER,
    password: MYSQL_PASSWORD,
    database: MYSQL_DATABASE,
    port: MYSQL_PORT,
  });

  console.log('✅ Connected to MySQL\n');

  try {
    // Clear existing data if --clear flag is present
    if (process.argv.includes('--clear')) {
      console.log('🗑️  Clearing existing data...');
      await connection.query('DELETE FROM products');
      await connection.query('DELETE FROM categories');
      console.log('✅ Data cleared\n');
    }

    // Insert categories
    console.log('📤 Inserting categories...\n');
    let categoryCount = 0;
    for (const category of categories) {
      await connection.query(
        'INSERT INTO categories (name, slug, description, is_active, display_order) VALUES (?, ?, ?, ?, ?)',
        [category.name, category.slug, category.description, category.is_active, category.display_order]
      );
      categoryCount++;
      console.log(`✅ Created: ${category.name}`);
    }

    console.log(`\n✅ Created ${categoryCount} categories\n`);

    // Insert products
    console.log('📤 Inserting products...\n');
    let productCount = 0;
    for (const product of products) {
      await connection.query(
        `INSERT INTO products (
          name, short_description, description, price, compare_price,
          brand, model, engine_type, displacement, fuel_type,
          \`condition\`, stock_quantity, is_active, is_featured,
          images, category_id
        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,
        [
          product.name,
          product.short_description,
          product.description,
          product.price,
          product.compare_price || null,
          product.brand,
          product.model,
          product.engine_type,
          product.displacement,
          product.fuel_type,
          product.condition,
          product.stock_quantity,
          product.is_active,
          product.is_featured,
          product.images,
          product.category_id,
        ]
      );
      productCount++;
      console.log(`✅ Created: ${product.name}`);
    }

    console.log(`\n📊 Summary:`);
    console.log(`   ✅ Categories: ${categoryCount}`);
    console.log(`   ✅ Products: ${productCount}`);
    console.log(`\n🎉 Sample data seeded successfully!`);
    console.log(`\n💡 Visit http://localhost:21201/admin/products to see your products!\n`);

  } catch (error) {
    console.error('❌ Error seeding data:', error);
  } finally {
    await connection.end();
    console.log('👋 MySQL connection closed\n');
  }
}

seedData();

